import{a5 as y,a3 as c,V as T,a6 as E,a7 as A,T as R,Q as d,a8 as _,a2 as v,a9 as g,W as m,aa as N,ab as o,b as S,ac as k,E as q,g as x,q as F}from"./CLoVlWKP.js";function D(s,n,u,e=null,t=!1){c&&T();var a=s,r=null,i=null,f=null,h=t?N:0;y(()=>{if(f===(f=!!n()))return;let b=!1;if(c){const p=a.data===E;f===p&&(a=A(),R(a),d(!1),b=!0)}f?(r?_(r):r=v(()=>u(a)),i&&g(i,()=>{i=null})):(i?_(i):e&&(i=v(()=>e(a))),r&&g(r,()=>{r=null})),b&&d(!0)},h),c&&(a=m)}function w(s,n,u){if(s==null)return n(void 0),o;const e=S(()=>s.subscribe(n,u));return e.unsubscribe?()=>e.unsubscribe():e}let l=!1;function H(s,n,u){const e=u[n]??(u[n]={store:null,source:q(void 0),unsubscribe:o});if(e.store!==s)if(e.unsubscribe(),e.store=s??null,s==null)e.source.v=void 0,e.unsubscribe=o;else{var t=!0;e.unsubscribe=w(s,a=>{t?e.source.v=a:F(e.source,a)}),t=!1}return x(e.source)}function I(){const s={};return k(()=>{for(var n in s)s[n].unsubscribe()}),s}function L(s){var n=l;try{return l=!1,[s(),l]}finally{l=n}}export{H as a,L as c,D as i,I as s};
